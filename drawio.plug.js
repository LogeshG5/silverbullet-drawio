var Y=Object.defineProperty;var I=(e,t)=>{for(var o in t)Y(e,o,{get:t[o],enumerable:!0})};function y(e){let t=atob(e),o=t.length,i=new Uint8Array(o);for(let n=0;n<o;n++)i[n]=t.charCodeAt(n);return i}function u(e){typeof e=="string"&&(e=new TextEncoder().encode(e));let t="",o=e.byteLength;for(let i=0;i<o;i++)t+=String.fromCharCode(e[i]);return btoa(t)}var c=e=>{throw new Error("Not initialized yet")},f=typeof window>"u"&&typeof globalThis.WebSocketPair>"u";typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var A=new Map,C=0;f&&(globalThis.syscall=async(e,...t)=>await new Promise((o,i)=>{C++,A.set(C,{resolve:o,reject:i}),c({type:"sys",id:C,name:e,args:t})}));function W(e,t,o){f&&(c=o,self.addEventListener("message",i=>{(async()=>{let n=i.data;switch(n.type){case"inv":{let g=e[n.name];if(!g)throw new Error(`Function not loaded: ${n.name}`);try{let a=await Promise.resolve(g(...n.args||[]));c({type:"invr",id:n.id,result:a})}catch(a){console.error("An exception was thrown as a result of invoking function",n.name,"error:",a.message),c({type:"invr",id:n.id,error:a.message})}}break;case"sysr":{let g=n.id,a=A.get(g);if(!a)throw Error("Invalid request id");A.delete(g),n.error?a.reject(new Error(n.error)):a.resolve(n.result)}break}})().catch(console.error)}),c({type:"manifest",manifest:t}))}async function B(e,t){if(typeof e!="string"){let o=new Uint8Array(await e.arrayBuffer()),i=o.length>0?u(o):void 0;t={method:e.method,headers:Object.fromEntries(e.headers.entries()),base64Body:i},e=e.url}return syscall("sandboxFetch.fetch",e,t)}globalThis.nativeFetch=globalThis.fetch;function v(){globalThis.fetch=async function(e,t){let o=t&&t.body?u(new Uint8Array(await new Response(t.body).arrayBuffer())):void 0,i=await B(e,t&&{method:t.method,headers:t.headers,base64Body:o});return new Response(i.base64Body?y(i.base64Body):null,{status:i.status,headers:i.headers})}}f&&v();var s={};I(s,{alert:()=>ye,configureVimMode:()=>ve,confirm:()=>be,copyToClipboard:()=>Pe,deleteLine:()=>Se,dispatch:()=>he,downloadFile:()=>ae,filterBox:()=>le,flashNotification:()=>de,fold:()=>xe,foldAll:()=>Ue,getCurrentEditor:()=>Q,getCurrentPage:()=>E,getCurrentPageMeta:()=>J,getCurrentPath:()=>M,getCursor:()=>H,getRecentlyOpenedPages:()=>X,getSelection:()=>z,getText:()=>K,getUiOption:()=>We,goHistory:()=>se,hidePanel:()=>ce,insertAtCursor:()=>fe,insertAtPos:()=>pe,invokeCommand:()=>O,moveCursor:()=>Ce,moveCursorToLine:()=>Ae,moveLineDown:()=>Ye,moveLineUp:()=>ke,navigate:()=>q,newWindow:()=>ne,openCommandPalette:()=>_,openPageNavigator:()=>$,openSearchPanel:()=>Te,openUrl:()=>ie,prompt:()=>Ze,rebuildEditorState:()=>re,redo:()=>Ge,reloadConfigAndCommands:()=>oe,reloadPage:()=>ee,reloadUI:()=>te,replaceRange:()=>ue,save:()=>L,sendMessage:()=>Ee,setSelection:()=>D,setText:()=>j,setUiOption:()=>Ve,showPanel:()=>me,showProgress:()=>Ie,toggleFold:()=>we,undo:()=>Ne,unfold:()=>Fe,unfoldAll:()=>Re,uploadFile:()=>ge,vimEx:()=>Be});typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});function r(e,...t){return globalThis.syscall(e,...t)}function E(){return r("editor.getCurrentPage")}function J(){return r("editor.getCurrentPageMeta")}function M(){return r("editor.getCurrentPath")}function X(){return r("editor.getRecentlyOpenedPages")}function Q(){return r("editor.getCurrentEditor")}function K(){return r("editor.getText")}function j(e,t=!1){return r("editor.setText",e,t)}function H(){return r("editor.getCursor")}function z(){return r("editor.getSelection")}function D(e,t){return r("editor.setSelection",e,t)}function O(e,t){return r("editor.invokeCommand",e,t)}function L(){return r("editor.save")}function q(e,t=!1,o=!1){return r("editor.navigate",e,t,o)}function $(e="page"){return r("editor.openPageNavigator",e)}function _(){return r("editor.openCommandPalette")}function ee(){return r("editor.reloadPage")}function te(){return r("editor.reloadUI")}function re(){return r("editor.rebuildEditorState")}function oe(){return r("editor.reloadConfigAndCommands")}function ie(e,t=!1){return r("editor.openUrl",e,t)}function ne(){return r("editor.newWindow")}function se(e){return r("editor.goHistory",e)}function ae(e,t){return r("editor.downloadFile",e,t)}function ge(e,t){return r("editor.uploadFile",e,t)}function de(e,t="info"){return r("editor.flashNotification",e,t)}function le(e,t,o="",i=""){return r("editor.filterBox",e,t,o,i)}function me(e,t,o,i=""){return r("editor.showPanel",e,t,o,i)}function ce(e){return r("editor.hidePanel",e)}function Ie(e,t){return r("editor.showProgress",e,t)}function pe(e,t){return r("editor.insertAtPos",e,t)}function ue(e,t,o){return r("editor.replaceRange",e,t,o)}function Ce(e,t=!1){return r("editor.moveCursor",e,t)}function Ae(e,t=1,o=!1){return r("editor.moveCursorToLine",e,t,o)}function fe(e,t=!1,o=!1){return r("editor.insertAtCursor",e,t,o)}function he(e){return r("editor.dispatch",e)}function Ze(e,t=""){return r("editor.prompt",e,t)}function be(e){return r("editor.confirm",e)}function ye(e){return r("editor.alert",e)}function We(e){return r("editor.getUiOption",e)}function Ve(e,t){return r("editor.setUiOption",e,t)}function xe(){return r("editor.fold")}function Fe(){return r("editor.unfold")}function we(){return r("editor.toggleFold")}function Ue(){return r("editor.foldAll")}function Re(){return r("editor.unfoldAll")}function Ne(){return r("editor.undo")}function Ge(){return r("editor.redo")}function Te(){return r("editor.openSearchPanel")}function Pe(e){return r("editor.copyToClipboard",e)}function Se(){return r("editor.deleteLine")}function ke(){return r("editor.moveLineUp")}function Ye(){return r("editor.moveLineDown")}function Be(e){return r("editor.vimEx",e)}function ve(){return r("editor.configureVimMode")}function Ee(e,t){return r("editor.sendMessage",e,t)}var l={};I(l,{deleteDocument:()=>$e,deleteFile:()=>ot,deletePage:()=>He,fileExists:()=>it,getDocumentMeta:()=>Oe,getFileMeta:()=>tt,getPageMeta:()=>Xe,listDocuments:()=>De,listFiles:()=>_e,listPages:()=>Me,listPlugs:()=>ze,pageExists:()=>Qe,readDocument:()=>Le,readFile:()=>et,readPage:()=>Ke,writeDocument:()=>qe,writeFile:()=>rt,writePage:()=>je});function Me(){return r("space.listPages")}function Xe(e){return r("space.getPageMeta",e)}function Qe(e){return r("space.pageExists",e)}function Ke(e){return r("space.readPage",e)}function je(e,t){return r("space.writePage",e,t)}function He(e){return r("space.deletePage",e)}function ze(){return r("space.listPlugs")}function De(){return r("space.listDocuments")}function Oe(e){return r("space.getDocumentMeta",e)}function Le(e){return r("space.readDocument",e)}function qe(e,t){return r("space.writeDocument",e,t)}function $e(e){return r("space.deleteDocument",e)}function _e(){return r("space.listFiles")}function et(e){return r("space.readFile",e)}function tt(e){return r("space.getFileMeta",e)}function rt(e,t){return r("space.writeFile",e,t)}function ot(e){return r("space.deleteFile",e)}function it(e){return r("space.fileExists",e)}var p={};I(p,{getConfig:()=>ct,getMode:()=>lt,getVersion:()=>mt,invokeCommand:()=>st,invokeFunction:()=>nt,listCommands:()=>at,listSyscalls:()=>gt,reloadPlugs:()=>dt,wipeClient:()=>It});function nt(e,...t){return r("system.invokeFunction",e,...t)}function st(e,t){return r("system.invokeCommand",e,t)}function at(){return r("system.listCommands")}function gt(){return r("system.listSyscalls")}function dt(){return r("system.reloadPlugs")}function lt(){return r("system.getMode")}function mt(){return r("system.getVersion")}function ct(e,t=void 0){return r("system.getConfig",e,t)}function It(e=!1){return r("system.wipeClient",e)}var d={};I(d,{getFileMeta:()=>bt,listFiles:()=>Zt,readAsset:()=>ht});function ft(e){let t=atob(e),o=t.length,i=new Uint8Array(o);for(let n=0;n<o;n++)i[n]=t.charCodeAt(n);return i}function V(e){let t=e.split(",",2)[1];return ft(t)}async function ht(e,t,o="utf8"){let i=await r("asset.readAsset",e,t);switch(o){case"utf8":return new TextDecoder().decode(V(i));case"dataurl":return i}}async function Zt(e){return await r("asset.listFiles",e)}async function bt(e,t){return await r("asset.getFileMeta",e,t)}function h(e){return(e.split(".").pop()??"").toLowerCase()}function Nt(e){let t=/\(([^)]+)\)/g;return Array.from(e.matchAll(t)).map(o=>o[1]).filter(o=>{let i=h(o);return i==="svg"||i==="png"||i==="drawio"})}async function Z(){return(await p.getConfig("drawio",{}))?.editorUrl??"https://embed.diagrams.net/?embed=1&spin=1&proto=json&configure=1"}async function x(e){let t=await d.readAsset("drawio","assets/drawioframe.js"),o=await Z();await s.showPanel("modal",1,`
      <style>
        iframe {
          border: 0;
          position: fixed;
          inset: 0; /* shorthand for top/left/right/bottom: 0 */
          width: 100%;
          height: 100%;
        }
      </style>
      <div>
        <iframe 
          id="drawioiframe" 
          src="${o}&saveAndExit=1&noSaveBtn=1&noExitBtn=1" 
          drawio-path="${e}">
        </iframe>
      </div>
    `,t)}async function F(){let e=await s.getCurrentPage(),t=e.substring(0,e.lastIndexOf("/")),o=await s.getText(),i=Nt(o),n="";if(i.length==0){s.flashNotification("No png or svg diagrams attached to this page!","error");return}if(i.length===1)n=t+"/"+i[0];else{let g=i.map(b=>({name:b,description:""})),a=await s.filterBox("Edit",g,"","");if(!a){await s.flashNotification("No diagram selected!","error");return}n=t+"/"+a.name}await x(n)}async function w(){let e=await d.readAsset("drawio","assets/drawioframe.js"),t=await Z(),o=await s.getCurrentPage();return{html:`
      <style>
        iframe {
          border: 0;
          position: fixed;
          inset: 0; /* shorthand for top/left/right/bottom: 0 */
          width: 100%;
          height: 100%;
        }
      </style>
      <div>
        <iframe 
          id="drawioiframe" 
          src="${t}&saveAndExit=0&noSaveBtn=1&noExitBtn=1" 
          drawio-path="${o}">
        </iframe>
      </div>
    `,script:e}}async function U(e){let t=await s.getText(),o=await s.getSelection(),{from:i,to:n}=o,g=t.slice(i,n),a=await s.prompt("Enter a diagram name:",g||"");if(!a)return!1;a=Gt(a,e);let m=`${Tt(await s.getCurrentPage())}/${a}`;if(await Pt(m))return!1;let k=h(m);await St(k,m),e==="Widget"?await kt(i,n,m):await Yt(i,n,a,m)}function Gt(e,t){let o=h(e);return t==="Widget"?o==="drawio"?e:`${e}.drawio`:t==="Attachment"?o==="svg"||o==="png"?e:(s.flashNotification("No extension provided, svg chosen","info"),`${e}.svg`):e}function Tt(e){let t=e.lastIndexOf("/");return t!==-1?e.substring(0,t):e}async function Pt(e){return await l.fileExists(e)?!await s.confirm("File already exists! Do you want to overwrite?"):!1}async function St(e,t){let o=await d.readAsset("drawio",`assets/sample.${e}.base64`),i=atob(o),n=new TextEncoder().encode(i);await l.writeFile(t,n)}async function kt(e,t,o){let i=`\`\`\`drawio
url:${o}
\`\`\``;await s.replaceRange(e,t,i)}async function Yt(e,t,o,i){let n=`![${o}](${o})`;await s.replaceRange(e,t,n),await x(i)}async function R(){U("Widget")}async function N(){U("Attachment")}async function G(e){let t=e.match(/url:\s*(.+)/i),o=t?t[1].trim():null;if(!o||!await l.fileExists(o))return{html:"<pre>File does not exist</pre>",script:""};let i=await d.readAsset("drawio","assets/drawioframe.js");return{html:`
      <style>
        iframe {
          border: 0;
          position: fixed;
          inset: 0; /* shorthand for top/left/right/bottom: 0 */
          width: 100%;
          height: 100%;
        }
      </style>
      <div style="width:100vw; height:500px;">
        <iframe 
          id="drawioiframe" 
          src="${await Z()}&ui=min&saveAndExit=0&noSaveBtn=1&noExitBtn=1" 
          drawio-path="${o}" drawio-type='widget'>
        </iframe>
      </div>
    `,script:i}}function T(){return{options:[{label:"drawio",detail:"Create new Drawio diagram",invoke:"drawio.createDiagramAsWidget"}]}}var P={editdrawio:F,drawioEditor:w,createDiagramAsWidget:R,createDiagramAsAttachment:N,showWidget:G,drawioSlashCommand:T},S={name:"drawio",version:.1,assets:{"assets/drawioframe.js":{data:"data:application/javascript;base64,Y29uc3QgaWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRyYXdpb2lmcmFtZSIpOwppZnJhbWU/LnNldEF0dHJpYnV0ZSgiZnJhbWVib3JkZXIiLCAiMCIpOwoKY29uc3QgdHlwZSA9IGlmcmFtZS5nZXRBdHRyaWJ1dGUoJ2RyYXdpby10eXBlJyk7CmNvbnN0IGZpbGVuYW1lID0gaWZyYW1lLmdldEF0dHJpYnV0ZSgnZHJhd2lvLXBhdGgnKTsKY29uc3QgaW5kZXggPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpOwpjb25zdCBleHQgPSBpbmRleCAhPT0gLTEgPyBmaWxlbmFtZS5zbGljZShpbmRleCArIDEpIDogJyc7CgovLyAtLS0gSGVscGVycyAtLS0KY29uc3Qgc3lzY2FsbGVyID0gKHR5cGVvZiBzaWx2ZXJidWxsZXQgIT09ICJ1bmRlZmluZWQiID8gc2lsdmVyYnVsbGV0LnN5c2NhbGwgOiBzeXNjYWxsKTsKCmZ1bmN0aW9uIGJhc2U2NFRvUG5nKGJhc2U2NFN0cmluZykgewogICAgY29uc3QgcmF3ID0gYmFzZTY0U3RyaW5nLnNwbGl0KCIsIilbMV0gPz8gIiI7CiAgICBjb25zdCBieXRlcyA9IFVpbnQ4QXJyYXkuZnJvbShhdG9iKHJhdyksIGMgPT4gYy5jaGFyQ29kZUF0KDApKTsKICAgIHJldHVybiBuZXcgQmxvYihbYnl0ZXNdLCB7IHR5cGU6ICJpbWFnZS9wbmciIH0pOwp9CgpmdW5jdGlvbiBiYXNlNjRUb1N2ZyhiYXNlNjRTdHJpbmcpIHsKICAgIGNvbnN0IHJhdyA9IGJhc2U2NFN0cmluZy5zdWJzdHJpbmcoYmFzZTY0U3RyaW5nLmluZGV4T2YoIiwiKSArIDEpOwogICAgY29uc3QgdGV4dCA9IGF0b2IocmF3KTsKICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUodGV4dCk7Cn0KCmFzeW5jIGZ1bmN0aW9uIGNsb3NlKCkgewogICAgc3lzY2FsbGVyKCJzeW5jLnBlcmZvcm1TcGFjZVN5bmMiKS50aGVuKCgpID0+IHsKICAgICAgICBzeXNjYWxsZXIoImVkaXRvci5yZWxvYWRVSSIpOwogICAgfSkKICAgIGF3YWl0IHN5c2NhbGxlcigiZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uIiwgIlJlZnJlc2ggcGFnZSB0byB2aWV3IGNoYW5nZXMhIik7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIHJlY2VpdmUpOwogICAgYXdhaXQgc3lzY2FsbGVyKCJlZGl0b3IuaGlkZVBhbmVsIiwgIm1vZGFsIik7Cn0KCmFzeW5jIGZ1bmN0aW9uIGNvbnZlcnRCbG9iVG9CYXNlNjQoYmxvYikgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7CiAgICAgICAgfTsKICAgICAgICByZWFkZXIub25lcnJvciA9IChlcnJvcikgPT4gewogICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH07CiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7CiAgICB9KTsKfQoKLy8gLS0tIFNCIE1lc3NhZ2UgaGFuZGxlciAtLS0KdHJ5IHsKICAgIGdsb2JhbFRoaXMuc2lsdmVyYnVsbGV0LmFkZEV2ZW50TGlzdGVuZXIoImZpbGUtb3BlbiIsIChldmVudCkgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKCJzaWx2ZWJ1bGxldCBmaWxlLW9wZW4iLCBldmVudC5kZXRhaWwuZGF0YSk7CiAgICAgICAgLy8gdW51c2VkIGFzIGZpbGUgaXMgcmVhZCBpbiAnaW5pdCcgCiAgICB9KTsKICAgIGdsb2JhbFRoaXMuc2lsdmVyYnVsbGV0LmFkZEV2ZW50TGlzdGVuZXIoImZpbGUtdXBkYXRlIiwgKGV2ZW50KSA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2coInNpbHZlYnVsbGV0IGZpbGUtdXBkYXRlIiwgZXZlbnQuZGV0YWlsLmRhdGEpOwogICAgICAgIC8vIHBvc3QgYSBtZXNzYWdlIHRvIGluaXQgYWdhaW4KICAgIH0pOwogICAgZ2xvYmFsVGhpcy5zaWx2ZXJidWxsZXQuYWRkRXZlbnRMaXN0ZW5lcigicmVxdWVzdC1zYXZlIiwgKGV2ZW50KSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coInNpbHZlYnVsbGV0IHJlcXVlc3Qtc2F2ZSIsIGV2ZW50KTsKICAgICAgICBzaWx2ZXJidWxsZXQuc2VuZE1lc3NhZ2UoImZpbGUtc2F2ZWQiLCB7IGRhdGE6IHdpbmRvdy5kaWFncmFtRGF0YSB9KTsKICAgIH0pOwp9IGNhdGNoIChlKSB7Cn0KCmFzeW5jIGZ1bmN0aW9uIGdldEZpbGUoZXh0LCBmaWxlbmFtZSkgewogICAgbGV0IGRhdGEgPSAiIjsKCiAgICB0cnkgewogICAgICAgIGRhdGEgPSBhd2FpdCBzeXNjYWxsZXIoInNwYWNlLnJlYWRGaWxlIiwgZmlsZW5hbWUpOwoKICAgICAgICBzd2l0Y2ggKGV4dCkgewogICAgICAgICAgICBjYXNlICJzdmciOgogICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShkYXRhKTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiZHJhd2lvIjoKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAicG5nIjoKICAgICAgICAgICAgICAgIGRhdGEgPSBhd2FpdCBjb252ZXJ0QmxvYlRvQmFzZTY0KGRhdGEpOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbnN1cHBvcnRlZCBleHRlbnNpb246ICR7ZXh0fWApOwogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGxvYWQgZmlsZSAke2ZpbGVuYW1lfTpgLCBlcnIpOwogICAgICAgIHJldHVybiBkYXRhOwogICAgfQoKICAgIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBnZXRFeHBvcnREYXRhKGV4dCwgZGF0YSkgewogICAgc3dpdGNoIChleHQpIHsKICAgICAgICBjYXNlICJzdmciOgogICAgICAgICAgICBkYXRhID0gYmFzZTY0VG9TdmcoZGF0YSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInBuZyI6CiAgICAgICAgICAgIGRhdGEgPSBiYXNlNjRUb1BuZyhkYXRhKTsKICAgICAgICAgICAgYnJlYWs7CiAgICB9CiAgICByZXR1cm4gZGF0YTsKfQoKLy8gLS0tIE1lc3NhZ2UgaGFuZGxlciAtLS0KYXN5bmMgZnVuY3Rpb24gcmVjZWl2ZShldnQpIHsKICAgIGlmICghZXZ0LmRhdGEpIHJldHVybjsKCiAgICBsZXQgbXNnOwogICAgdHJ5IHsKICAgICAgICBtc2cgPSBKU09OLnBhcnNlKGV2dC5kYXRhKTsKICAgIH0gY2F0Y2ggewogICAgICAgIHJldHVybjsgLy8gaWdub3JlIGludmFsaWQgSlNPTgogICAgfQoKICAgIHN3aXRjaCAobXNnLmV2ZW50KSB7CiAgICAgICAgY2FzZSAiY29uZmlndXJlIjoKICAgICAgICAgICAgaWZyYW1lPy5jb250ZW50V2luZG93Py5wb3N0TWVzc2FnZSgKICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICJjb25maWd1cmUiLAogICAgICAgICAgICAgICAgICAgIGNvbmZpZzogeyBkZWZhdWx0Rm9udHM6IFsiSHVtb3IgU2FucyIsICJIZWx2ZXRpY2EiLCAiVGltZXMgTmV3IFJvbWFuIl0gfSwKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgIioiCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJpbml0IjogewogICAgICAgICAgICBsZXQgZGF0YSA9IGF3YWl0IGdldEZpbGUoZXh0LCBmaWxlbmFtZSk7CiAgICAgICAgICAgIGlmcmFtZT8uY29udGVudFdpbmRvdz8ucG9zdE1lc3NhZ2UoCiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogImxvYWQiLCBhdXRvc2F2ZTogMSwgeG1sOiBkYXRhIH0pLAogICAgICAgICAgICAgICAgIioiCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgY2FzZSAiZXhwb3J0IjogewogICAgICAgICAgICBjb25zdCBkYXRhID0gZ2V0RXhwb3J0RGF0YShleHQsIG1zZy5kYXRhKTsKICAgICAgICAgICAgYXdhaXQgc3lzY2FsbGVyKCJzcGFjZS53cml0ZUZpbGUiLCBmaWxlbmFtZSwgZGF0YSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgY2FzZSAiYXV0b3NhdmUiOgogICAgICAgIGNhc2UgInNhdmUiOgogICAgICAgICAgICBpZiAoZXh0ID09PSAnZHJhd2lvJykgewogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICd3aWRnZXQnKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3lzY2FsbGVyKCJzcGFjZS53cml0ZUZpbGUiLCBmaWxlbmFtZSwgbXNnLnhtbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGlhZ3JhbURhdGEgPSBtc2cueG1sOwogICAgICAgICAgICAgICAgICAgIGdsb2JhbFRoaXMuc2lsdmVyYnVsbGV0LnNlbmRNZXNzYWdlKCJmaWxlLWNoYW5nZWQiLCB7IGRhdGE6IG1zZy54bWwgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBpZnJhbWU/LmNvbnRlbnRXaW5kb3c/LnBvc3RNZXNzYWdlKAogICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAiZXhwb3J0IiwKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBleHQgPT09ICJwbmciID8gInhtbHBuZyIgOiAieG1sc3ZnIiwKICAgICAgICAgICAgICAgICAgICAgICAgeG1sOiBtc2cueG1sLCAvLyBteGZpbGUKICAgICAgICAgICAgICAgICAgICAgICAgc3BpbjogIlVwZGF0aW5nIHBhZ2UiLAogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICIqIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBOb3RpZnkgc2F2ZSBpcyBkb25lCiAgICAgICAgICAgIGlmcmFtZT8uY29udGVudFdpbmRvdz8ucG9zdE1lc3NhZ2UoCiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogInN0YXR1cyIsIG1lc3NhZ2VLZXk6ICJhbGxDaGFuZ2VzU2F2ZWQiLCBtb2RpZmllZDogZmFsc2UgfSksCiAgICAgICAgICAgICAgICAiKiIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKG1zZy5leGl0KSBjbG9zZSgpOwoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImV4aXQiOgogICAgICAgICAgICBjbG9zZSgpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgYnJlYWs7CiAgICB9Cn0KCndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgcmVjZWl2ZSk7Cgo=",mtime:1757150332796},"assets/sample.drawio.base64":{data:"data:application/octet-stream;base64,UEcxNFptbHNaU0JvYjNOMFBTSmhjSEF1WkdsaFozSmhiWE11Ym1WMElpQmhaMlZ1ZEQwaVRXOTZhV3hzWVM4MUxqQWdLRmRwYm1SdmQzTWdUbFFnTVRBdU1Ec2dWMmx1TmpRN0lIZzJOQ2tnUVhCd2JHVlhaV0pMYVhRdk5UTTNMak0ySUNoTFNGUk5UQ3dnYkdsclpTQkhaV05yYnlrZ1EyaHliMjFsTHpFek9TNHdMakF1TUNCVFlXWmhjbWt2TlRNM0xqTTJJRVZrWnk4eE16a3VNQzR3TGpBaUlIWmxjbk5wYjI0OUlqSTRMakl1TUNJK0NpQWdQR1JwWVdkeVlXMGdibUZ0WlQwaVVHRm5aUzB4SWlCcFpEMGlOVE14YWxoNlFsVm1hbTF1TUV4aFExTXpObklpUGdvZ0lDQWdQRzE0UjNKaGNHaE5iMlJsYkNCa2VEMGlNVEF6TkNJZ1pIazlJall6TmlJZ1ozSnBaRDBpTVNJZ1ozSnBaRk5wZW1VOUlqRXdJaUJuZFdsa1pYTTlJakVpSUhSdmIyeDBhWEJ6UFNJeElpQmpiMjV1WldOMFBTSXhJaUJoY25KdmQzTTlJakVpSUdadmJHUTlJakVpSUhCaFoyVTlJakVpSUhCaFoyVlRZMkZzWlQwaU1TSWdjR0ZuWlZkcFpIUm9QU0l4TVRBd0lpQndZV2RsU0dWcFoyaDBQU0k0TlRBaUlHMWhkR2c5SWpBaUlITm9ZV1J2ZHowaU1DSStDaUFnSUNBZ0lEeHliMjkwUGdvZ0lDQWdJQ0FnSUR4dGVFTmxiR3dnYVdROUlqQWlJQzgrQ2lBZ0lDQWdJQ0FnUEcxNFEyVnNiQ0JwWkQwaU1TSWdjR0Z5Wlc1MFBTSXdJaUF2UGdvZ0lDQWdJQ0E4TDNKdmIzUStDaUFnSUNBOEwyMTRSM0poY0doTmIyUmxiRDRLSUNBOEwyUnBZV2R5WVcwK0Nqd3ZiWGhtYVd4bFBnbz0=",mtime:1757150332797},"assets/sample.png.base64":{data:"data:application/octet-stream;base64,aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBQVhOU1IwSUFyczRjNlFBQUFtQjBSVmgwYlhobWFXeGxBQ1V6UTIxNFptbHNaU1V5TUdodmMzUWxNMFFsTWpKaGNIQXVaR2xoWjNKaGJYTXVibVYwSlRJeUpUSXdZV2RsYm5RbE0wUWxNakpOYjNwcGJHeGhKVEpHTlM0d0pUSXdLRmRwYm1SdmQzTWxNakJPVkNVeU1ERXdMakFsTTBJbE1qQlhhVzQyTkNVelFpVXlNSGcyTkNrbE1qQkJjSEJzWlZkbFlrdHBkQ1V5UmpVek55NHpOaVV5TUNoTFNGUk5UQ1V5UXlVeU1HeHBhMlVsTWpCSFpXTnJieWtsTWpCRGFISnZiV1VsTWtZeE16RXVNQzR3TGpBbE1qQlRZV1poY21rbE1rWTFNemN1TXpZbE1qQkZaR2NsTWtZeE16RXVNQzR3TGpBbE1qSWxNakIyWlhKemFXOXVKVE5FSlRJeU1qWXVNQzQxSlRJeUpUTkZKVE5EWkdsaFozSmhiU1V5TUc1aGJXVWxNMFFsTWpKUVlXZGxMVEVsTWpJbE1qQnBaQ1V6UkNVeU1tTXRha1Y1ZFZkUU5tMXhVRGxNTjA1algwMWpKVEl5SlRORlpHUklRa1Z2U1dkRlFVUlJjaVV5UWtkUGEyeFBaSHBtVEZONVZVNXVVbXBhYUVKc01FZGhZbE1sTWtKUWFEQjNXVFozVEhNM2VHUlhSMWxvVEVjbE1rWklhU1V5UWxaSFdHeEhRVXBwYTFaSk1rVnVhM0ZhU0hseFdqRm9jV1ZJWWt4bU16QkdaMnhRUTFWeVZrOXZSa0ZYYmxGb2VFeFJValJWVDFWVWRHeFpjWGw0TmpaQ01tdFlSbkpqV1dwTU4zRnFhbkp2V1ROelNVZHhOVzV4Y2s1NVYyTTVTSEpKTms5dmJIRkZXWFZ1VWsxaFRXa3habWxuVURCclozTmpkbTluVm1oUFZWY3dabTF2U0ZoUVVUZ2xNa0o1VjNWbWFIbzFlaVV5UmxwNk9FMXpaRTgzU0dkVGJGazNOVFF5TUZGbGVEUm5NQ1V6UkNVelF5VXlSbVJwWVdkeVlXMGxNMFVsTTBNbE1rWnRlR1pwYkdVbE0wWFNCLy95QUFBQUMwbEVRVlFZVjJOZ0FBSUFBQVVBQWFyVnlGRUFBQUFBU1VWT1JLNUNZSUk9",mtime:1757150332797},"assets/sample.svg.base64":{data:"data:application/octet-stream;base64,UEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaVZWUkdMVGdpUHo0S1BDRXRMU0JFYnlCdWIzUWdaV1JwZENCMGFHbHpJR1pwYkdVZ2QybDBhQ0JsWkdsMGIzSnpJRzkwYUdWeUlIUm9ZVzRnWkhKaGR5NXBieUF0TFQ0S1BDRkVUME5VV1ZCRklITjJaeUJRVlVKTVNVTWdJaTB2TDFjelF5OHZSRlJFSUZOV1J5QXhMakV2TDBWT0lpQWlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZSM0poY0docFkzTXZVMVpITHpFdU1TOUVWRVF2YzNabk1URXVaSFJrSWo0S1BITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSE4wZVd4bFBTSmlZV05yWjNKdmRXNWtPaUIwY21GdWMzQmhjbVZ1ZERzZ1ltRmphMmR5YjNWdVpDMWpiMnh2Y2pvZ2RISmhibk53WVhKbGJuUTdJR052Ykc5eUxYTmphR1Z0WlRvZ2JHbG5hSFFnWkdGeWF6c2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjJaWEp6YVc5dVBTSXhMakVpSUhkcFpIUm9QU0l4Y0hnaUlHaGxhV2RvZEQwaU1YQjRJaUIyYVdWM1FtOTRQU0l0TUM0MUlDMHdMalVnTVNBeElpQmpiMjUwWlc1MFBTSW1iSFE3YlhobWFXeGxJR2h2YzNROUpuRjFiM1E3WVhCd0xtUnBZV2R5WVcxekxtNWxkQ1p4ZFc5ME95QmhaMlZ1ZEQwbWNYVnZkRHROYjNwcGJHeGhMelV1TUNBb1YybHVaRzkzY3lCT1ZDQXhNQzR3T3lCWGFXNDJORHNnZURZMEtTQkJjSEJzWlZkbFlrdHBkQzgxTXpjdU16WWdLRXRJVkUxTUxDQnNhV3RsSUVkbFkydHZLU0JEYUhKdmJXVXZNVE14TGpBdU1DNHdJRk5oWm1GeWFTODFNemN1TXpZZ1JXUm5MekV6TVM0d0xqQXVNQ1p4ZFc5ME95QjJaWEp6YVc5dVBTWnhkVzkwT3pJMkxqQXVOU1p4ZFc5ME95Wm5kRHNtSXpFd095QWdKbXgwTzJScFlXZHlZVzBnYm1GdFpUMG1jWFZ2ZER0UVlXZGxMVEVtY1hWdmREc2dhV1E5Sm5GMWIzUTdZeTFxUlhsMVYxQTJiWEZRT1V3M1RtTmZUV01tY1hWdmREc21aM1E3SmlNeE1Ec2dJQ0FnSm14ME8yMTRSM0poY0doTmIyUmxiQ0JrZUQwbWNYVnZkRHM1TURNbWNYVnZkRHNnWkhrOUpuRjFiM1E3TlRRM0puRjFiM1E3SUdkeWFXUTlKbkYxYjNRN01TWnhkVzkwT3lCbmNtbGtVMmw2WlQwbWNYVnZkRHN4TUNaeGRXOTBPeUJuZFdsa1pYTTlKbkYxYjNRN01TWnhkVzkwT3lCMGIyOXNkR2x3Y3owbWNYVnZkRHN4Sm5GMWIzUTdJR052Ym01bFkzUTlKbkYxYjNRN01TWnhkVzkwT3lCaGNuSnZkM005Sm5GMWIzUTdNU1p4ZFc5ME95Qm1iMnhrUFNaeGRXOTBPekVtY1hWdmREc2djR0ZuWlQwbWNYVnZkRHN4Sm5GMWIzUTdJSEJoWjJWVFkyRnNaVDBtY1hWdmREc3hKbkYxYjNRN0lIQmhaMlZYYVdSMGFEMG1jWFZ2ZERzNE5UQW1jWFZ2ZERzZ2NHRm5aVWhsYVdkb2REMG1jWFZ2ZERzeE1UQXdKbkYxYjNRN0lHMWhkR2c5Sm5GMWIzUTdNQ1p4ZFc5ME95QnphR0ZrYjNjOUpuRjFiM1E3TUNaeGRXOTBPeVpuZERzbUl6RXdPeUFnSUNBZ0lDWnNkRHR5YjI5MEptZDBPeVlqTVRBN0lDQWdJQ0FnSUNBbWJIUTdiWGhEWld4c0lHbGtQU1p4ZFc5ME96QW1jWFZ2ZERzZ0x5Wm5kRHNtSXpFd095QWdJQ0FnSUNBZ0pteDBPMjE0UTJWc2JDQnBaRDBtY1hWdmREc3hKbkYxYjNRN0lIQmhjbVZ1ZEQwbWNYVnZkRHN3Sm5GMWIzUTdJQzhtWjNRN0ppTXhNRHNnSUNBZ0lDQW1iSFE3TDNKdmIzUW1aM1E3SmlNeE1Ec2dJQ0FnSm14ME95OXRlRWR5WVhCb1RXOWtaV3dtWjNRN0ppTXhNRHNnSUNac2REc3ZaR2xoWjNKaGJTWm5kRHNtSXpFd095WnNkRHN2YlhobWFXeGxKbWQwT3lZak1UQTdJajQ4WkdWbWN5OCtQR2MrUEdjZ1pHRjBZUzFqWld4c0xXbGtQU0l3SWo0OFp5QmtZWFJoTFdObGJHd3RhV1E5SWpFaUx6NDhMMmMrUEM5blBqd3ZjM1puUGc9PQ==",mtime:1757150332798}},imports:["https://get.silverbullet.md/global.plug.json"],requiredPermissions:["fetch"],functions:{editdrawio:{path:"./drawio.ts:editDrawioDiagram",command:{name:"Draw.io: Edit diagram",requireMode:"r"}},drawioEditor:{path:"./drawio.ts:openDrawioEditor",editor:["drawio"]},createDiagramAsWidget:{path:"./drawio.ts:createDiagramAsWidget",command:{name:"Draw.io: Create diagram",requireMode:"r"}},createDiagramAsAttachment:{path:"./drawio.ts:createDiagramAsAttachment",command:{name:"Draw.io: Create SVG/PNG diagram",requireMode:"r"}},showWidget:{path:"./drawio.ts:showWidget",codeWidget:"drawio"},drawioSlashCommand:{path:"./drawio.ts:snippetSlashComplete",events:["slash:complete"]}}},fr={manifest:S,functionMapping:P};W(P,S,self.postMessage);export{fr as plug};
