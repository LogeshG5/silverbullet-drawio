var Pe=Object.create;var U=Object.defineProperty;var Ie=Object.getOwnPropertyDescriptor;var be=Object.getOwnPropertyNames;var ve=Object.getPrototypeOf,we=Object.prototype.hasOwnProperty;var Ze=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),C=(e,r)=>{for(var o in r)U(e,o,{get:r[o],enumerable:!0})},Te=(e,r,o,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of be(r))!we.call(e,a)&&a!==o&&U(e,a,{get:()=>r[a],enumerable:!(s=Ie(r,a))||s.enumerable});return e};var Ge=(e,r,o)=>(o=e!=null?Pe(ve(e)):{},Te(r||!e||!e.__esModule?U(o,"default",{value:e,enumerable:!0}):o,e));var ue=Ze((J,E)=>{(function(e,r){var o,s;typeof J=="object"&&typeof E<"u"?E.exports=r():typeof define=="function"&&define.amd?define(r):(o=e.Base64,(s=r()).noConflict=function(){return e.Base64=o,s},e.Meteor&&(Base64=s),e.Base64=s)})(typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:J,function(){"use strict";var e,r="3.7.3",o=typeof atob=="function",s=typeof btoa=="function",a=typeof Buffer=="function",d=typeof TextDecoder=="function"?new TextDecoder:void 0,u=typeof TextEncoder=="function"?new TextEncoder:void 0,g=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),m=(e={},g.forEach(function(t,i){return e[t]=i}),e),F=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,c=String.fromCharCode.bind(String),I=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(t,i){return i===void 0&&(i=function(l){return l}),new Uint8Array(Array.prototype.slice.call(t,0).map(i))},L=function(t){return t.replace(/=/g,"").replace(/[+\/]/g,function(i){return i=="+"?"-":"_"})},z=function(t){return t.replace(/[^A-Za-z0-9\+\/]/g,"")},D=function(t){for(var i,l,y,x,f="",W=t.length%3,w=0;w<t.length;){if((l=t.charCodeAt(w++))>255||(y=t.charCodeAt(w++))>255||(x=t.charCodeAt(w++))>255)throw new TypeError("invalid character found");f+=g[(i=l<<16|y<<8|x)>>18&63]+g[i>>12&63]+g[i>>6&63]+g[63&i]}return W?f.slice(0,W-3)+"===".substring(W):f},B=s?function(t){return btoa(t)}:a?function(t){return Buffer.from(t,"binary").toString("base64")}:D,N=a?function(t){return Buffer.from(t).toString("base64")}:function(t){for(var i=[],l=0,y=t.length;l<y;l+=4096)i.push(c.apply(null,t.subarray(l,l+4096)));return B(i.join(""))},b=function(t,i){return i===void 0&&(i=!1),i?L(N(t)):N(t)},ye=function(t){if(t.length<2)return(i=t.charCodeAt(0))<128?t:i<2048?c(192|i>>>6)+c(128|63&i):c(224|i>>>12&15)+c(128|i>>>6&63)+c(128|63&i);var i=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return c(240|i>>>18&7)+c(128|i>>>12&63)+c(128|i>>>6&63)+c(128|63&i)},he=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,H=function(t){return t.replace(he,ye)},O=a?function(t){return Buffer.from(t,"utf8").toString("base64")}:u?function(t){return N(u.encode(t))}:function(t){return B(H(t))},h=function(t,i){return i===void 0&&(i=!1),i?L(O(t)):O(t)},j=function(t){return h(t,!0)},Ce=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Ae=function(t){switch(t.length){case 4:var i=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return c(55296+(i>>>10))+c(56320+(1023&i));case 3:return c((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return c((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Q=function(t){return t.replace(Ce,Ae)},q=function(t){if(t=t.replace(/\s+/g,""),!F.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));for(var i,l,y,x="",f=0;f<t.length;)i=m[t.charAt(f++)]<<18|m[t.charAt(f++)]<<12|(l=m[t.charAt(f++)])<<6|(y=m[t.charAt(f++)]),x+=l===64?c(i>>16&255):y===64?c(i>>16&255,i>>8&255):c(i>>16&255,i>>8&255,255&i);return x},Y=o?function(t){return atob(z(t))}:a?function(t){return Buffer.from(t,"base64").toString("binary")}:q,$=a?function(t){return I(Buffer.from(t,"base64"))}:function(t){return I(Y(t),function(i){return i.charCodeAt(0)})},_=function(t){return $(ee(t))},xe=a?function(t){return Buffer.from(t,"base64").toString("utf8")}:d?function(t){return d.decode($(t))}:function(t){return Q(Y(t))},ee=function(t){return z(t.replace(/[-_]/g,function(i){return i=="-"?"+":"/"}))},R=function(t){return xe(ee(t))},re=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}},te=function(){var t=function(i,l){return Object.defineProperty(String.prototype,i,re(l))};t("fromBase64",function(){return R(this)}),t("toBase64",function(i){return h(this,i)}),t("toBase64URI",function(){return h(this,!0)}),t("toBase64URL",function(){return h(this,!0)}),t("toUint8Array",function(){return _(this)})},ne=function(){var t=function(i,l){return Object.defineProperty(Uint8Array.prototype,i,re(l))};t("toBase64",function(i){return b(this,i)}),t("toBase64URI",function(){return b(this,!0)}),t("toBase64URL",function(){return b(this,!0)})},v={version:r,VERSION:"3.7.3",atob:Y,atobPolyfill:q,btoa:B,btoaPolyfill:D,fromBase64:R,toBase64:h,encode:h,encodeURI:j,encodeURL:j,utob:H,btou:Q,decode:R,isValid:function(t){if(typeof t!="string")return!1;var i=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(i)||!/[^\s0-9a-zA-Z\-_]/.test(i)},fromUint8Array:b,toUint8Array:_,extendString:te,extendUint8Array:ne,extendBuiltins:function(){te(),ne()},Base64:{}};return Object.keys(v).forEach(function(t){return v.Base64[t]=v[t]}),v})});var P=e=>{throw new Error("Not initialized yet")},M=typeof window>"u"&&typeof globalThis.WebSocketPair>"u";typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var V=new Map,K=0;M&&(globalThis.syscall=async(e,...r)=>await new Promise((o,s)=>{K++,V.set(K,{resolve:o,reject:s}),P({type:"sys",id:K,name:e,args:r})}));function oe(e,r,o){M&&(P=o,self.addEventListener("message",s=>{(async()=>{let a=s.data;switch(a.type){case"inv":{let d=e[a.name];if(!d)throw new Error(`Function not loaded: ${a.name}`);try{let u=await Promise.resolve(d(...a.args||[]));P({type:"invr",id:a.id,result:u})}catch(u){console.error("An exception was thrown as a result of invoking function",a.name,"error:",u.message),P({type:"invr",id:a.id,error:u.message})}}break;case"sysr":{let d=a.id,u=V.get(d);if(!u)throw Error("Invalid request id");V.delete(d),a.error?u.reject(new Error(a.error)):u.resolve(a.result)}break}})().catch(console.error)}),P({type:"manifest",manifest:r}))}function Se(e){let r=atob(e),o=r.length,s=new Uint8Array(o);for(let a=0;a<o;a++)s[a]=r.charCodeAt(a);return s}function ie(e){typeof e=="string"&&(e=new TextEncoder().encode(e));let r="",o=e.byteLength;for(let s=0;s<o;s++)r+=String.fromCharCode(e[s]);return btoa(r)}async function Fe(e,r){if(typeof e!="string"){let o=new Uint8Array(await e.arrayBuffer()),s=o.length>0?ie(o):void 0;r={method:e.method,headers:Object.fromEntries(e.headers.entries()),base64Body:s},e=e.url}return syscall("sandboxFetch.fetch",e,r)}globalThis.nativeFetch=globalThis.fetch;function Be(){globalThis.fetch=async function(e,r){let o=r&&r.body?ie(new Uint8Array(await new Response(r.body).arrayBuffer())):void 0,s=await Fe(e,r&&{method:r.method,headers:r.headers,base64Body:o});return new Response(s.base64Body?Se(s.base64Body):null,{status:s.status,headers:s.headers})}}M&&Be();var p={};C(p,{confirm:()=>ar,copyToClipboard:()=>Cr,deleteLine:()=>Ar,dispatch:()=>ir,downloadFile:()=>Oe,filterBox:()=>qe,flashNotification:()=>Qe,fold:()=>ur,foldAll:()=>fr,getCurrentPage:()=>Ne,getCursor:()=>We,getSelection:()=>Ue,getText:()=>Ye,getUiOption:()=>cr,goHistory:()=>He,hidePanel:()=>_e,insertAtCursor:()=>or,insertAtPos:()=>er,moveCursor:()=>tr,moveCursorToLine:()=>nr,navigate:()=>Me,newWindow:()=>De,openCommandPalette:()=>Xe,openPageNavigator:()=>ke,openSearchPanel:()=>hr,openUrl:()=>ze,prompt:()=>sr,redo:()=>yr,reloadConfigAndCommands:()=>Le,reloadPage:()=>Je,reloadUI:()=>Ee,replaceRange:()=>rr,save:()=>Ve,setSelection:()=>Ke,setText:()=>Re,setUiOption:()=>dr,showPanel:()=>$e,toggleFold:()=>gr,undo:()=>mr,unfold:()=>lr,unfoldAll:()=>pr,uploadFile:()=>je,vimEx:()=>xr});typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});function n(e,...r){return globalThis.syscall(e,...r)}function Ne(){return n("editor.getCurrentPage")}function Ye(){return n("editor.getText")}function Re(e,r=!1){return n("editor.setText",e,r)}function We(){return n("editor.getCursor")}function Ue(){return n("editor.getSelection")}function Ke(e,r){return n("editor.setSelection",e,r)}function Ve(){return n("editor.save")}function Me(e,r=!1,o=!1){return n("editor.navigate",e,r,o)}function ke(e="page"){return n("editor.openPageNavigator",e)}function Xe(){return n("editor.openCommandPalette")}function Je(){return n("editor.reloadPage")}function Ee(){return n("editor.reloadUI")}function Le(){return n("editor.reloadConfigAndCommands")}function ze(e,r=!1){return n("editor.openUrl",e,r)}function De(){return n("editor.newWindow")}function He(e){return n("editor.goHistory",e)}function Oe(e,r){return n("editor.downloadFile",e,r)}function je(e,r){return n("editor.uploadFile",e,r)}function Qe(e,r="info"){return n("editor.flashNotification",e,r)}function qe(e,r,o="",s=""){return n("editor.filterBox",e,r,o,s)}function $e(e,r,o,s=""){return n("editor.showPanel",e,r,o,s)}function _e(e){return n("editor.hidePanel",e)}function er(e,r){return n("editor.insertAtPos",e,r)}function rr(e,r,o){return n("editor.replaceRange",e,r,o)}function tr(e,r=!1){return n("editor.moveCursor",e,r)}function nr(e,r=1,o=!1){return n("editor.moveCursorToLine",e,r,o)}function or(e){return n("editor.insertAtCursor",e)}function ir(e){return n("editor.dispatch",e)}function sr(e,r=""){return n("editor.prompt",e,r)}function ar(e){return n("editor.confirm",e)}function cr(e){return n("editor.getUiOption",e)}function dr(e,r){return n("editor.setUiOption",e,r)}function ur(){return n("editor.fold")}function lr(){return n("editor.unfold")}function gr(){return n("editor.toggleFold")}function fr(){return n("editor.foldAll")}function pr(){return n("editor.unfoldAll")}function mr(){return n("editor.undo")}function yr(){return n("editor.redo")}function hr(){return n("editor.openSearchPanel")}function Cr(e){return n("editor.copyToClipboard",e)}function Ar(){return n("editor.deleteLine")}function xr(e){return n("editor.vimEx",e)}var Z={};C(Z,{parseMarkdown:()=>Pr,renderParseTree:()=>Ir});function Pr(e){return n("markdown.parseMarkdown",e)}function Ir(e){return n("markdown.renderParseTree",e)}var A={};C(A,{deleteAttachment:()=>Yr,deleteFile:()=>Vr,deletePage:()=>Tr,fileExists:()=>Mr,getAttachmentMeta:()=>Fr,getFileMeta:()=>Ur,getPageMeta:()=>vr,listAttachments:()=>Sr,listFiles:()=>Rr,listPages:()=>br,listPlugs:()=>Gr,readAttachment:()=>Br,readFile:()=>Wr,readPage:()=>wr,writeAttachment:()=>Nr,writeFile:()=>Kr,writePage:()=>Zr});function br(){return n("space.listPages")}function vr(e){return n("space.getPageMeta",e)}function wr(e){return n("space.readPage",e)}function Zr(e,r){return n("space.writePage",e,r)}function Tr(e){return n("space.deletePage",e)}function Gr(){return n("space.listPlugs")}function Sr(){return n("space.listAttachments")}function Fr(e){return n("space.getAttachmentMeta",e)}function Br(e){return n("space.readAttachment",e)}function Nr(e,r){return n("space.writeAttachment",e,r)}function Yr(e){return n("space.deleteAttachment",e)}function Rr(){return n("space.listFiles")}function Wr(e){return n("space.readFile",e)}function Ur(e){return n("space.getFileMeta",e)}function Kr(e,r){return n("space.writeFile",e,r)}function Vr(e){return n("space.deleteFile",e)}function Mr(e){return n("space.fileExists",e)}var T={};C(T,{applyAttributeExtractors:()=>zr,getEnv:()=>jr,getMode:()=>Qr,getSpaceConfig:()=>Dr,getVersion:()=>qr,invokeCommand:()=>Xr,invokeFunction:()=>kr,invokeSpaceFunction:()=>Lr,listCommands:()=>Jr,listSyscalls:()=>Er,reloadConfig:()=>Or,reloadPlugs:()=>Hr});function kr(e,...r){return n("system.invokeFunction",e,...r)}function Xr(e,r){return n("system.invokeCommand",e,r)}function Jr(){return n("system.listCommands")}function Er(){return n("system.listSyscalls")}function Lr(e,...r){return n("system.invokeSpaceFunction",e,...r)}function zr(e,r,o){return n("system.applyAttributeExtractors",e,r,o)}async function Dr(e,r){return await n("system.getSpaceConfig",e)??r}function Hr(){return n("system.reloadPlugs")}function Or(){return n("system.reloadConfig")}function jr(){return n("system.getEnv")}function Qr(){return n("system.getMode")}function qr(){return n("system.getVersion")}var G={};C(G,{readAsset:()=>it});function ot(e){let r=atob(e),o=r.length,s=new Uint8Array(o);for(let a=0;a<o;a++)s[a]=r.charCodeAt(a);return s}function se(e){let r=e.split(",",2)[1];return ot(r)}async function it(e,r,o="utf8"){let s=await n("asset.readAsset",e,r);switch(o){case"utf8":return new TextDecoder().decode(se(s));case"dataurl":return s}}var S={};C(S,{parse:()=>ct,stringify:()=>dt});function ct(e){return n("yaml.parse",e)}function dt(e){return n("yaml.stringify",e)}function k(e,r){if(r(e))return[e];let o=[];if(e.children)for(let s of e.children)o=[...o,...k(s,r)];return o}function X(e,r){return k(e,o=>o.type===r)[0]}function ae(e,r){k(e,r)}async function pt(e,r){let o=await A.readPage(e),s=await Z.parseMarkdown(o),a;return ae(s,d=>{if(d.type!=="FencedCode")return!1;let u=X(d,"CodeInfo");if(r&&!u||r&&!r.includes(u.children[0].text))return!1;let g=X(d,"CodeText");return g?(a=g.children[0].text,!0):!1}),a}async function ce(e,r=["yaml"]){let o=await pt(e,r);if(o!==void 0)try{return S.parse(o)}catch(s){throw console.error("YAML Page parser error",s),new Error(`YAML Error: ${s.message}`)}}async function de(e,r){try{return await T.getSpaceConfig(e)??r}catch{try{let s=(await ce("SETTINGS")||{})[e];return s===void 0?r:s}catch(o){if(o.message==="Not found")return r;throw o}}}var le=Ge(ue());function ge(e){let r=e.lastIndexOf(".");return r!==-1?e.slice(r+1):""}function mt(e){let r=/\((.*?)\)/g,o=[],s;for(;(s=r.exec(e))!==null;){let a=ge(s[1]);(a=="svg"||a=="png")&&o.push(s[1])}return o}async function yt(e,r,o){let s=await G.readAsset("drawio","assets/drawioframe.js");await p.showPanel("modal",1,`
      <style type="text/css">
        iframe {
          border: 0;
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          width: 100%;
          height: 100%
        }
      </style>
      <div>
        <div id="drawiodata" hidden>${o}</div>
        <iframe id="draioiframe" src=${e} drawio-path='${r}'></iframe>
      </div>
    `,`${s}`)}async function fe(){let e=await p.getText(),r=await p.getCurrentPage(),o=r.substring(0,r.lastIndexOf("/")),s=mt(e),a="";if(s.length==0){p.flashNotification("No png or svg diagrams attached to this page!","error");return}if(s.length==1)a=o+"/"+s[0];else{let F=s.map(I=>({name:I,description:""})),c=await p.filterBox("Edit",F,"","");if(!c){await p.flashNotification("No diagram selected!","error");return}a=o+"/"+c.name}let d=await A.readAttachment(a),u=ge(a);u=="svg"?d=String.fromCharCode.apply(null,d):u=="png"&&(d="data:image/png;base64,"+le.Base64.fromUint8Array(d));let g=await de("drawio"),m="";g&&g.editorUrl?m=g.editorUrl:m="https://embed.diagrams.net/?embed=1&spin=1&proto=json&configure=1",await yt(m,a,d)}var pe={editdrawio:fe},me={name:"drawio",version:.1,assets:{"assets/drawioframe.js":{data:"data:application/javascript;base64,dmFyIGlmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcmFpb2lmcmFtZScpCmlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2ZyYW1lYm9yZGVyJywgJzAnKTsKCmZ1bmN0aW9uIGJhc2U2NFRvUG5nKGJhc2U2NFN0cmluZykgewogICAgYmFzZTY0U3RyaW5nID0gYmFzZTY0U3RyaW5nLnNwbGl0KCcsJylbMV0KICAgIGNvbnN0IGFyciA9IFVpbnQ4QXJyYXkuZnJvbShhdG9iKGJhc2U2NFN0cmluZyksIGMgPT4gYy5jaGFyQ29kZUF0KDApKTsKICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYXJyXSwgeyB0eXBlOiAnaW1hZ2UvcG5nJyB9KTsKICAgIHJldHVybiBibG9iOwp9CgpmdW5jdGlvbiBiYXNlNjRUb1N2ZyhiYXNlNjRTdHJpbmcpIHsKICAgIGJhc2U2NFN0cmluZyA9IGJhc2U2NFN0cmluZy5zdWJzdHJpbmcoYmFzZTY0U3RyaW5nLmluZGV4T2YoJywnKSArIDEpCiAgICBjb25zdCB0ZXh0ID0gYXRvYihiYXNlNjRTdHJpbmcpOwogICAgc3ZnID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHRleHQpCiAgICByZXR1cm4gc3ZnOwp9Cgp2YXIgY2xvc2UgPSBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHJlY2VpdmUpOwogICAgYXdhaXQgc3lzY2FsbCgiZWRpdG9yLmhpZGVQYW5lbCIsICJtb2RhbCIpOwp9OwoKdmFyIHJlY2VpdmUgPSBhc3luYyBmdW5jdGlvbiAoZXZ0KSB7CiAgICBpZiAoZXZ0LmRhdGEubGVuZ3RoIDwgMSkgcmV0dXJuOwogICAgdmFyIG1zZyA9IEpTT04ucGFyc2UoZXZ0LmRhdGEpOwoKICAgIGNvbnN0IGZpbGVuYW1lID0gaWZyYW1lLmdldEF0dHJpYnV0ZSgnZHJhd2lvLXBhdGgnKTsKICAgIGNvbnN0IGluZGV4ID0gZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKTsKICAgIGNvbnN0IGV4dCA9IGluZGV4ICE9PSAtMSA/IGZpbGVuYW1lLnNsaWNlKGluZGV4ICsgMSkgOiAnJzsKCiAgICAvLyBJZiBjb25maWd1cmU9MSBVUkwgcGFyYW1ldGVyIGlzIHVzZWQgdGhlIGFwcGxpY2F0aW9uCiAgICAvLyB3YWl0cyBmb3IgdGhpcyBtZXNzYWdlLiBGb3IgY29uZmlndXJhdGlvbiBvcHRpb25zIHNlZQogICAgLy8gaHR0cHM6Ly9kZXNrLmRyYXcuaW8vc3VwcG9ydC9zb2x1dGlvbnMvYXJ0aWNsZXMvMTYwMDAwNTgzMTYKICAgIGlmIChtc2cuZXZlbnQgPT0gJ2NvbmZpZ3VyZScpIHsKICAgICAgICBpZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgIGFjdGlvbjogJ2NvbmZpZ3VyZScsCiAgICAgICAgICAgIGNvbmZpZzogeyBkZWZhdWx0Rm9udHM6IFsiSHVtb3IgU2FucyIsICJIZWx2ZXRpY2EiLCAiVGltZXMgTmV3IFJvbWFuIl0gfQogICAgICAgIH0pLCAnKicpOwogICAgfQogICAgZWxzZSBpZiAobXNnLmV2ZW50ID09ICdpbml0JykgewogICAgICAgIGNvbnN0IGRhdGFEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJhd2lvZGF0YScpOwogICAgICAgIGxldCBkYXRhID0gIiI7CiAgICAgICAgaWYgKGV4dCA9PSAnc3ZnJykgewogICAgICAgICAgICBjb25zdCBzdmdlbGUgPSBkYXRhRGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzdmcnKVswXTsKICAgICAgICAgICAgZGF0YSA9IG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoc3ZnZWxlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGRhdGEgPSBkYXRhRGl2LmlubmVySFRNTDsKICAgICAgICB9CiAgICAgICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICBhY3Rpb246ICdsb2FkJywKICAgICAgICAgICAgYXV0b3NhdmU6IDEsCiAgICAgICAgICAgIHhtbDogZGF0YQogICAgICAgIH0pLCAnKicpOwoKICAgIH0KICAgIGVsc2UgaWYgKG1zZy5ldmVudCA9PSAnZXhwb3J0JykgewogICAgICAgIGNvbnN0IGRpYWdyYW1QYXRoID0gaWZyYW1lLmdldEF0dHJpYnV0ZSgnZHJhd2lvLXBhdGgnKTsKICAgICAgICBsZXQgZGF0YSA9ICcnOwogICAgICAgIGlmIChleHQgPT0gJ3N2ZycpIHsKICAgICAgICAgICAgZGF0YSA9IGJhc2U2NFRvU3ZnKG1zZy5kYXRhKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGRhdGEgPSBiYXNlNjRUb1BuZyhtc2cuZGF0YSk7CiAgICAgICAgfQogICAgICAgIGF3YWl0IHN5c2NhbGwoInNwYWNlLndyaXRlRmlsZSIsIGRpYWdyYW1QYXRoLCBkYXRhKTsKICAgICAgICAvLyBJU1NVRTogcmVsb2FkUGFnZSBkb2VzIG5vdCB3b3JrIGJlZm9yZSBvciBhZnRlciBjbG9zZQogICAgICAgIGF3YWl0IHN5c2NhbGwoImVkaXRvci5yZWxvYWRQYWdlIik7CiAgICAgICAgYXdhaXQgc3lzY2FsbCgiZWRpdG9yLmZsYXNoTm90aWZpY2F0aW9uIiwgIlJlZnJlc2ggcGFnZSB0byB2aWV3IGNoYW5nZXMhIik7CiAgICAgICAgY2xvc2UoKTsKICAgIH0KICAgIGVsc2UgaWYgKG1zZy5ldmVudCA9PSAnYXV0b3NhdmUnKSB7CiAgICB9CiAgICBlbHNlIGlmIChtc2cuZXZlbnQgPT0gJ3NhdmUnKSB7CiAgICAgICAgLy8gQ2FsbCBleHBvcnQKICAgICAgICBpZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgIGFjdGlvbjogJ2V4cG9ydCcsCiAgICAgICAgICAgIGZvcm1hdDogZXh0ID09ICdwbmcnID8gJ3htbHBuZycgOiAneG1sc3ZnJywKICAgICAgICAgICAgeG1sOiBtc2cueG1sLAogICAgICAgICAgICBzcGluOiAnVXBkYXRpbmcgcGFnZScKICAgICAgICB9KSwgJyonKTsKICAgIH0KICAgIGVsc2UgaWYgKG1zZy5ldmVudCA9PSAnZXhpdCcpIHsKICAgICAgICBjbG9zZSgpOwogICAgfQoKfTsKCndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgcmVjZWl2ZSk7",mtime:1736757022391}},imports:["https://get.silverbullet.md/global.plug.json"],requiredPermissions:["shell","fetch"],functions:{editdrawio:{path:"./drawio.ts:edit",command:{name:"Draw.io: Edit diagram",requireMode:"r"}}}},tn={manifest:me,functionMapping:pe};oe(pe,me,self.postMessage);export{tn as plug};
